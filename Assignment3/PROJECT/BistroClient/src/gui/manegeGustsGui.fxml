<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>

<BorderPane fx:id="rootPane"
            id="rootPane"
            stylesheets="@Style.css"
            xmlns="http://javafx.com/javafx/25"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="guiControllers.ManageGustsController">

    <!-- ===== TOP HEADER ===== -->
    <top>
        <VBox spacing="6">
            <padding>
                <Insets top="20" right="20" bottom="10" left="20"/>
            </padding>

            <HBox alignment="CENTER_LEFT" spacing="12">
                <children>
                    <VBox spacing="2">
                        <children>
                            <Label text="Manage Guests" styleClass="title"/>
                            <Label text="View and update guest details" styleClass="subtitle"/>
                        </children>
                    </VBox>

                    <Region HBox.hgrow="ALWAYS"/>

                    <!-- status label -->
                    <Label fx:id="lblStatus" managed="false" visible="false" styleClass="errorMsg"/>
                </children>
            </HBox>
        </VBox>
    </top>

    <!-- ===== CENTER TABLE (CARD) ===== -->
    <center>
        <VBox spacing="12">
            <padding>
                <Insets top="0" right="20" bottom="10" left="20"/>
            </padding>

            <VBox styleClass="card30" spacing="10">
                <padding>
                    <Insets top="18" right="18" bottom="18" left="18"/>
                </padding>

                <children>
                    <TableView fx:id="tblGuests" prefHeight="420">
                        <columns>
                            <TableColumn fx:id="colId" prefWidth="80" text="id"/>
                            <TableColumn fx:id="colPhone" prefWidth="150" text="phone"/>
                            <TableColumn fx:id="colEmail" prefWidth="220" text="email"/>
                            <TableColumn fx:id="colFirstName" prefWidth="140" text="first_name"/>
                            <TableColumn fx:id="colLastName" prefWidth="140" text="last_name"/>
                            <TableColumn fx:id="colCreatedAt" prefWidth="180" text="created_at"/>
                        </columns>
                    </TableView>
                </children>
            </VBox>
        </VBox>
    </center>

    <!-- ===== BOTTOM FORM (CARD) ===== -->
    <bottom>
        <VBox spacing="12">
            <padding>
                <Insets top="0" right="20" bottom="20" left="20"/>
            </padding>

            <VBox styleClass="card" spacing="14">
                <padding>
                    <Insets top="16" right="16" bottom="16" left="16"/>
                </padding>

                <children>

                    <Label text="Guest details (select a row to fill fields)" styleClass="field-label"/>

                    <GridPane hgap="12" vgap="12">
                        <columnConstraints>
                            <ColumnConstraints prefWidth="150"/>
                            <ColumnConstraints prefWidth="260"/>
                            <ColumnConstraints prefWidth="150"/>
                            <ColumnConstraints prefWidth="260"/>
                        </columnConstraints>

                        <!-- Row 0 -->
                        <Label text="Guest ID:" styleClass="subtitle" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                        <TextField fx:id="txtId" promptText="(readonly)" editable="false"
                                   GridPane.columnIndex="1" GridPane.rowIndex="0"/>

                        <Label text="Phone:" styleClass="subtitle" GridPane.columnIndex="2" GridPane.rowIndex="0"/>
                        <TextField fx:id="txtPhone" promptText="e.g. 0523456789"
                                   GridPane.columnIndex="3" GridPane.rowIndex="0"/>

                        <!-- Row 1 -->
                        <Label text="Email:" styleClass="subtitle" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                        <TextField fx:id="txtEmail" promptText="name@example.com"
                                   GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                        <Label text="Created At:" styleClass="subtitle" GridPane.columnIndex="2" GridPane.rowIndex="1"/>
                        <TextField fx:id="txtCreatedAt" promptText="(readonly)" editable="false"
                                   GridPane.columnIndex="3" GridPane.rowIndex="1"/>

                        <!-- Row 2 -->
                        <Label text="First Name:" styleClass="subtitle" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                        <TextField fx:id="txtFirstName" promptText="Daniel"
                                   GridPane.columnIndex="1" GridPane.rowIndex="2"/>

                        <Label text="Last Name:" styleClass="subtitle" GridPane.columnIndex="2" GridPane.rowIndex="2"/>
                        <TextField fx:id="txtLastName" promptText="Levi"
                                   GridPane.columnIndex="3" GridPane.rowIndex="2"/>

                        <rowConstraints>
                            <RowConstraints/>
                            <RowConstraints/>
                            <RowConstraints/>
                        </rowConstraints>
                    </GridPane>

                    <HBox alignment="CENTER_RIGHT" spacing="10">
                        <children>
                            <Region HBox.hgrow="ALWAYS"/>

                            <Button fx:id="btnRefresh"
                                    text="Refresh"
                                    onAction="#onRefreshClicked"
                                    styleClass="btnSecondary"/>

                            <Button fx:id="btnUpdate"
                                    text="Update"
                                    onAction="#onUpdateClicked"
                                    styleClass="btnPrimary"/>

                            <Button fx:id="btnBack"
                                    text="Back"
                                    onAction="#onBackClicked"
                                    styleClass="btnSecondary"/>
                        </children>
                    </HBox>

                </children>
            </VBox>
        </VBox>
    </bottom>

</BorderPane>
